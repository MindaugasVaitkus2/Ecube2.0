<div class="modal fade" id="{{ model_db_name }}__create_new" role="dialog">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Add New {{ model_title|title }}</h4>
            </div>
            <div class="modal-body">
                <form action="{{ add_url }}" id="input_model__{{ object.id }}" method="POST">
                    {% for field in input_fields %}
                        <div class="row">
                        {{ field }}
                        </div>
                    {% endfor %}
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" onclick="refreshVal()" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-default" form="input_model__{{ object.id }}" onclick="validate()">Save</button>

            </div>
        </div>
    </div>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>



<script>
    
    
    function refreshVal()
    {
        debugger;
        $('.modal-content').find('input:text').val(''); 
        $('.modal-content').find('span').html('');  
    }
    $(document).ready(function() {
        debugger;
        $('.modal-content').find('input:text').val('');
        $('.modal-content').find('span').html('');    
    });

    function validate()
    {
        debugger;
        new_arr1 = {}
        arr = $('#input_model__').serializeArray()
        for(i in arr){new_arr1[arr[i].name]=arr[i].value} 
        url = window.location.href + 'add/'
        
        $.ajax({
            url:url,
            type:"POST",
            data:new_arr1,
            success:function (data) {
                console.log(data)
                debugger;
                errors = data.error;
                for(i in errors){
                    error = errors[i]
                    elem = $('#' + error['name'] + '__error_span');
                    elem.html(error['html'])
                }
                
            }
        })
            
    }
    
</script>