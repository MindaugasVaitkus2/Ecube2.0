{% extends 'hotel/base.html' %}
{% load static %}

{% block header %}
{% endblock %}
{% block content %}


{% if msg %}
    <script type="text/javascript">
    alert("{{ msg }}",1);
    </script>
{% endif %}

<section class="body_contaner no_sidebar">
  <div class="container_content">
    <div class="inner_content_contaner">
      <div class="clearfix marT20"></div>
      <div class="col-md-12">
        <h2 class="pull-left">Manage Master</h2>
        <input type="button" name="" id="addNewRecord" onclick="return LoadRecord(event);" class="save_request_button pull-right" value="Add Record" data-toggle="modal" data-target="#Addnew_master">
      </div>
      <div class="clearfix marT10"></div>
      <div class="table-responsive marT20">
        <table id="datavalidation" class="display nowrap custom_table" style="width:100%">
          <thead>
            <tr id="ColumnHead">
            {% if HotelgrpFields %}
              <th width="15%">{{HotelgrpFields.0}} </th>
              <th width="20%">{{HotelgrpFields.1}}</th>
              <th>Action</th>
            {% endif %}
            </tr>
          </thead>
          <tbody>
            {% if HotelgrpList %}
              {% for rec in HotelgrpList %}
            <tr id="trid_{{rec.2}}">
              <td><label id="hotelgrpName_{{rec.2}}">{{ rec.0 }}</label></td>
              {% if  rec.1 == False %}
              <td><span class="circle red"><label id="activestatus_{{ rec.2 }}">Inactive</label></span></td>
              {% else %}
              <td><span class="circle green"><label id="activestatus_{{ rec.2 }}">Active</label></span></td>
              {% endif %}
              <td><span class="edit_btn" data-toggle="modal" id="edit_{{ rec.2 }}" data-target="#Addnew_master" 
                onClick="return LoadRecord(event);">Edit</span></td>
            </tr>
            {% endfor %}
        {% endif %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="clearfix"></div>
  </div>
  
  <!-- /*******************************************/--> 
  <!-- Modal -->
  <div class="modal fade" id="Addnew_master" role="dialog">
    <div class="modal-dialog modal-lg"> 
      
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Add new</h4>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-4">
            <form name="AddEditRecord" onsubmit="return addFromValidate()" action="{%url 'master_hotelgrp' %}" id="AddEditRecord" method="post">{% csrf_token %}
            <table>
            <tr><td></td><td><input type="hidden" class="form-control" id="ed_referenceNo" name="ed_referenceNo" value=""></td></tr>
            <tr><td></td><td><input type="hidden" class="form-control" id="ed_activeValue" name="ed_activeValue" value=""></td></tr>
            <tr><td><label>Hotel Group Name</label></td><td><input class="form-control" id="ed_HotelgrpName" name="ed_HotelgrpName" value=""></td></tr>
            <tr><td><label>Active</label></td><td><input class="form-control" type="checkbox" id="ed_active" name="ed_active" value="Active"></td></tr>
            <tr><td></td><td><input id="aded_newRecord" class="save_request_button pull-right" type="submit" value="Save"></td></tr>
            </table>
            </form>
           
      </div>
    </div>
  </div>
</section>

<script>

function addFromValidate()
{
  var format = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/;
  var hotelGrpName = document.getElementById('ed_HotelgrpName').value.length
  var hotelGrpVal = document.getElementById('ed_HotelgrpName').value
  
  
    if (hotelGrpName<1 || format.test(hotelGrpVal))
    {
        alert("Hotel Group Name can not be null or Any Special Charecter");
        return false;
    }
     if (document.getElementById('ed_active').checked)
     {
         document.getElementById('ed_activeValue').value="Active";
     }
     else
     {
         document.getElementById('ed_activeValue').value="Inactive";
     }
}

function LoadRecord(e)
{
    if (e.target.id=="addNewRecord")
    {
        document.getElementById('ed_HotelgrpName').value="";
        document.getElementById('ed_active').checked=false;
        document.getElementById('aded_newRecord').value="Add";
        
    }
    else
    {
        var recordID=e.target.id.split('_').pop();
        var hotelgrpName=document.getElementById('hotelgrpName_'+recordID).innerHTML;
        var activeFlg=document.getElementById('activestatus_'+recordID).innerHTML;

        if (activeFlg=="Active")
        {
            document.getElementById('ed_active').checked=true;
        }
        else
        {
            document.getElementById('ed_active').checked=false;
        } 

        document.getElementById('ed_HotelgrpName').value=hotelgrpName;
        document.getElementById('ed_referenceNo').value=recordID;
        document.getElementById('aded_newRecord').value="Save";
    }
}
</script>
{% endblock %}
