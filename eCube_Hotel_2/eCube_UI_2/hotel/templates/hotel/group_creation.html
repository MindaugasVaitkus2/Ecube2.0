{% extends 'hotel/base.html' %}
{% block header %}
    <style>
    ul.multiselect-container.dropdown-menu.active { display: block; }
    </style>
    <link rel="stylesheet" href="/static/hotel/css/responsive.css"/>
{% endblock %}
{% block content %}
    <section class="body_contaner no_sidebar">
        <div class="container_content">
            <div class="inner_content_contaner">
                <div class="clearfix"></div>
                <div class="white_bg marT30 multibatch_download">
                    <div class="col-md-12">
                        <h3 class="slide_heading">Search Group</h3>
                    </div>
                    <div class="col-md-12">
                        <div class="col-sm-3">
                            <div class="form-group multi_select_contaner" onclick="_drp_click_1(0);" >
                                <label for="cpw">Group Name</label>
                                <select class="multiselect_box form-control" multiple="multiple" id="drp_mul_grp_name" >

                                </select>
                            </div>
                        </div>
                        <div class="col-sm-3" style="display: none;">
                            <div class="form-group multi_select_contaner" onclick="_drp_click_1(1);">
                                <label for="cpw">Group Type</label>
                                <select class="multiselect_box form-control" multiple="multiple" id="drp_mul_grp_type">
                                    <option value="1">Beach</option>
                                    <option value="2">Hotels</option>
                                </select>
                            </div>
                        </div>

                        <!--<div class="col-sm-3">
                            <div class="form-group multi_select_contaner" onclick="_drp_click_1(2);">
                                <label for="cpw">Status</label>
                                <select class="multiselect_box form-control" multiple="multiple" id="drp_mul_status">
                                    <option value="1">Active</option>
                                    <option value="2">Inactive</option>
                                </select>
                            </div>
                        </div> -->


                        <div class="col-sm-4 col-sm-offset-1">
                            <div class="row"> 
                                 <div class="form-group">
                                        <label for="matching_status"> Status</label>
                                        <div class="checkbox checkbox-default checkbox-inline pull-left">
                                            <input id="active_chk" type="checkbox" value="1" checked>
                                            <label for="active_chk" style="padding-left: 5px;"> Active </label>
                                        </div>
                                        <div class="checkbox checkbox-default checkbox-inline pull-left">
                                            <input id="inactive_chk" type="checkbox" value="2">
                                            <label for="inactive_chk" style="padding-left: 5px;"> In Active </label>
                                        </div>  
                                </div>
                            </div>
                        </div>



                        <div class="col-sm-3  btn_contaner_req">
                            <div class="form-group multi_select_contaner">
                                <label for="cpw">&nbsp;</label>
                                <input type="button" value="Search" class="searh_buttnon" onclick="Search_htl_grp();">
                                <input type="button" value="Add Group" class="searh_buttnon add_group"
                                       data-toggle="modal"    data-target="#myModal" data-backdrop="static" data-keyboard="false" onclick="reset();">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="table-responsive marT20">
                    <table id="datavalidation" class="display nowrap custom_table" style="width:100%">
                        <thead>
                        <tr>
                            <th width="15%">Group Name</th>
                            <!-- <th width="20%">Group Type</th> -->
                            <th width="15%">Status</th>
                            <th width="15%">Hotel Count</th>
                            <th>Action</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody id="tbl_body_main_grp_list">


                        </tbody>
                    </table>
                </div>
            </div>
            <div class="clearfix"></div>

        </div>

        <!-- /*******************************************/-->
        <!-- Modal -->
        <div class="modal fade full_width in" id="myModal" role="dialog">
            <div class="modal-dialog addcity_popuop">
                <!-- Modal content-->
                <div class="modal-content full_height">
                    <div class="modal-body">
                        <div class="header_addcity">
                            <button type="button" class="close" data-dismiss="modal"><img
                                    src="/static/hotel/images/close_pop.png"
                                    alt=""></button>
                            <h4>Add City/Beach Group</h4>
                        </div>
                        <div class="addcity_popuop_body clearfix">


                            <div class="col-sm-6">
                                <div class="row marT10">
                                    <div class="col-md-4  col-sm-8" style="display: none;">
                                        <div class="form-group">
                                            <label for="email" >Create Group for </label>
                                            <div class="buttons_selection" id="div_btn_beach_grp" >
                                                <div class="round_btn city_group"><span
                                                        class="active">City Group</span>
                                                </div>
                                                <div class="round_btn batch_group"><span class="">Beach Group</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4 col-sm-4">
                                        <div class="form-group">
                                            <label>Group Name</label>
                                            <input type="text" id="txt_grp_name" onblur="chk_grp_name_alrdy_exists();" class="form-control"/>
                                        </div>
                                    </div>

                                </div>
                                <div class="row">


                                    <div class="col-md-4 col-sm-4">
                                        <div class="form-group">
                                            <label>Select Country</label>
                                            <select class="form-control" id="drp_country"
                                                    onchange="Bind_city_name_func(this)">
                                                <option value="0">Select option</option>

                                            </select>
                                        </div>
                                    </div>


                                    <div class="col-md-4 col-sm-4">
                                        <div class="form-group">
                                            <label>Select City</label>
                                            <select class="form-control" id="drp_cities"
                                                    onchange="Bind_hotel_name(this)">
                                                <option value="0">Select option</option>

                                            </select>
                                        </div>
                                    </div>

                                    <!-- <div class="col-md-4 col-sm-4">
                                        <div class="form-group">
                                            <label>Select Supplier</label>
                                            <select class="form-control" id="drpCompt"
                                                    onchange="Bind_hotel_name_by_sup(this)">
                                                <option value="0">Select option</option>
                                            </select>
                                        </div>
                                    </div> -->
                                </div>

                            </div>


                            <div class="col-sm-6">
                                <div class="row">
                                    <div class="col-md-12 marT10 clearfix">
                                        <h5 class="add_hotel_heading border_right_lightgray">Add Hotels</h5>
                                        <div class="checkbox checkbox-primary check_all">
                                            <input id="checkbox3" type="checkbox"
                                                   onchange="Select_all_hotel_beatc(this)">
                                            <label for="checkbox3">Select All</label>
                                        </div>
                                        <div class="pull-right col-md-7 padR0">
                                            <div class="add_hotels pull-left col-md-5">
                                                <a href="javascript:void(0);" class="upload_hotel_trigger">Upload
                                                    Hotels</a>
                                                <div class="upload_hotel_contaner" style="display: none">
                                                    <div class="upload_hotel_header">
                                                        <h3>Upload Hotel</h3>
                                                        <a href="javascript:void(0);" class="download_excel " onclick="Download_excel_templates();">Download
                                                            Template</a>
                                                    </div>
                                                    <div class="uplaod_body">
                                                        <div class="form-group ">
                                                        <span class="upload upload_file">
                                                            <input id="input_file_excel" type="file">
                                                            <img src="/static/hotel/images/upload_file.png" alt="">
                                                            <p>  Click here to upload  </p>
                                                            <span class="file_type"></span>
                                                        </span>
                                                        </div>

                                                        <div class=" ">
                                                            <input type="button" name="" class="choose_file float_none"
                                                                   value="Upload File" onclick="File_upload()">
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-7 padR0">
                                                <input type="text" class="form-control searchhotel pull-left "
                                                       id="text_input_search_hotel_beach" placeholder="Search">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12" id="holtel_list_beatch">
                                        <div class="addhotel_checkbox_contaner" id="div_append_hotels">

                                        </div>
                                    </div>

                                    <div class="col-md-12 marT10">
                                        <a href="#" class="selected_Hotels"><span id="span_total_count_hotel">0</span>
                                            Hotel Selected</a>

                                        <div class="pull-right col-md-6">
                                            <div class="row">
                                                <div class="col-md-5 padR0 pull-right">
                                                    <input type="button" class="Add_Group pull-right" id="btn_addgroup"
                                                           onclick="save_val_to_grid()" value="Add To Grid">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="div_id_hide_show" style="display: none;">
                            <div class="clearfix"> &nbsp;</div>
                            <div class="table-responsive marT20">

                                <table id="selected_hotels_grid" class="display nowrap custom_table" cellspacing="0"
                                       width="100%">
                                    <thead>
                                    <tr class="row_contaner">
                                        <th>COUNTRY</th>
                                        <th>CITY</th>
                                        <th>HOTEL NAME</th>
                                        <th>ACTION</th>
                                    </tr>
                                    </thead>
                                    <tbody id="id_tbl_body">

                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-12">
                                <div class="row text-center">
                                    <input type="button" class="Add_Group" id="btn_addgroupfrmgrid"
                                           value="Save Group" onclick="grp_add_to_db();" >
                                           <input type="button" class="Add_Group" id="btn_updategroupfrmgrid"
                                            value="update Group" style ="display: none;" onclick="Update_hotel_list_func();">
                                </div>

                                <input type="hidden" id="hdn_id_hdn">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
   {% endblock %}
   
{% block footer %}
      <script>
        delete_grp_details = "{% url 'delete_grp_details' %}";
        Bind_Country_name = "{% url 'Bind_Country_name' %}";
        Bind_city_name = "{% url 'Bind_city_name' %}";
        Match_unmatch_Bind_hotel_name = "{% url 'Match_unmatch_Bind_hotel_name' %}";
        DBind_hotel_name_by_sup = "{% url 'DBind_hotel_name_by_sup' %}";
        Save_htls_details = "{% url 'Save_htls_details' %}";
        Bind_grid_by_search = "{% url 'Bind_grid_by_search' %}";
        File_upload_excel = "{% url 'File_upload_excel' %}";
        chk_grp_name = "{% url 'chk_grp_name' %}";
        Bind_hotel_name_for_update  = "{% url 'Bind_hotel_name_for_update' %}";
        Update_hotel_list = "{% url 'Update_hotel_list' %}";
      </script>
    <script src="/static/hotel/js/app/City_beach.js"></script>
    <script src="/static/hotel/js/custom.js"></script>
    <script>
        $(document).ready(function () {


            var table = $('#datavalidation').DataTable({
                "sPaginationType": "full_numbers",
                "bFilter": true,
                "bInfo": false,
                "bPaginate": true,
                //scrollX:        true,
                //scrollCollapse: true,
                "paging": true,
                //fixedColumns:   { leftColumns: 0, rightColumns: 1  },
            });
            $('.dataTables_scrollBody,.addhotel_checkbox_contaner').perfectScrollbar();

        });


        $(".round_btn").click(function () {
            $(".round_btn").children().removeClass("active");
            $(this).children().addClass("active");
        });
        $(".upload_hotel_trigger").click(function () {
            $(".upload_hotel_contaner").slideDown();
        });
        $(".choose_file ").click(function () {
           // $(".upload_hotel_contaner").slideUp();
        });

        $(document).mouseup(function (e) {
            var container = $(".upload_hotel_contaner");
            if (!container.is(e.target) && container.has(e.target).length === 0) {
                container.slideUp();
            }
        });

        ///Activate Scrllbar
        $(".addhotel_checkbox_contaner").mouseenter(function () {
            $('*').perfectScrollbar('update');
        });


    </script>
    {% endblock %}